import Link from "next/link";
import { motion } from "framer-motion";

import { linkResolver } from "../../../prismicio";
const LinkPage = (data, pagename) => {
    const dataMenu = {
        _meta: {
            type: data.type,
            lang: data.lang,
            uid: data.uid,
            url: data.uid,
        },
    };
    return (
        <>
            <Link
                key={`top-nav-${data.id}`}
                href={data.url === "" ? `/${linkResolver(dataMenu)}` : data.uid}
                passHref
                prefetch
            >
                <a id={data.id} className={data.uid === pagename ? "selected" : ""}>
                    <motion.li className="nav-item" animate>
                        {data.text}
                        <div className="underline"></div>
                    </motion.li>
                </a>
            </Link>
        </>
    );
};

export const LinkLogo = () => (
    <Link
        href={`/`}
        passHref
    >
        <a>
            <svg width="72" height="46" viewBox="0 0 72 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_2131_3283)">
                    <path d="M0 9.19727H5.01228V18.0943C6.16582 16.6112 7.64995 15.2604 10.1881 15.2604C13.9793 15.2604 16.1904 17.7649 16.1904 21.8182V33.2535H11.1781V23.3999C11.1781 21.0269 10.0566 19.8084 8.14318 19.8084C6.23247 19.8084 5.01139 21.0269 5.01139 23.3999V33.2535H0V9.19727Z" fill="#FFFFFF" />
                    <path d="M54.4863 0L59.0782 2.00801L45.3993 33.2535H39.9285L54.4863 0Z" fill="#FFFFFF" />
                    <path d="M55.7412 27.7827C55.7412 23.9266 58.6766 22.1477 62.8651 22.1477C64.6442 22.1477 65.9293 22.4443 67.1824 22.8715V22.5749C67.1824 20.4994 65.8973 19.3466 63.3912 19.3466C61.4778 19.3466 60.1278 19.7089 58.5104 20.3013L57.2573 16.4789C59.2054 15.6219 61.1161 15.0615 64.119 15.0615C66.8562 15.0615 68.8336 15.787 70.0867 17.0393C71.4046 18.3572 72 20.3013 72 22.6743V32.9231H67.1513V31.011C65.9302 32.3627 64.2505 33.2526 61.8084 33.2526C58.4784 33.2535 55.7412 31.3414 55.7412 27.7827ZM67.2499 26.6948V25.8058C66.3941 25.4106 65.2725 25.1459 64.0515 25.1459C61.9079 25.1459 60.59 26.003 60.59 27.6504C60.59 29.0021 61.7089 29.7925 63.3272 29.7925C65.6671 29.7925 67.2499 28.5074 67.2499 26.6948Z" fill="#FFFFFF" />
                    <path d="M30.3866 14.8652C24.8802 14.8652 20.7913 18.9842 20.7913 24.0589C20.7913 29.201 24.8455 33.2535 30.3199 33.2535C35.829 33.2535 39.9179 29.1335 39.9179 24.0589C39.9179 18.9176 35.861 14.8652 30.3866 14.8652ZM30.3546 30.5661C26.9313 30.5661 24.1568 27.7934 24.1568 24.3724H36.5524C36.5524 27.7934 33.7779 30.5661 30.3546 30.5661Z" fill="#FFFFFF" />
                    <path d="M5.24329 42.9987C5.24329 41.4916 6.38083 40.2562 8.00982 40.2562C9.0105 40.2562 9.57127 40.6345 10.0645 41.1194L9.36687 41.9223C8.95717 41.5511 8.6088 41.3317 8.00271 41.3317C7.10867 41.3317 6.46348 42.0742 6.46348 42.9978C6.46348 43.9072 7.09268 44.6648 8.00271 44.6648C8.6088 44.6648 8.98028 44.4223 9.39708 44.0431L10.14 44.8388C9.59437 45.4223 8.98739 45.7403 7.96449 45.7403C6.40304 45.7411 5.24329 44.536 5.24329 42.9987Z" fill="#FFFFFF" />
                    <path d="M12.2009 42.9987C12.2009 41.4916 13.3909 40.2562 15.0288 40.2562C16.6667 40.2562 17.8406 41.4756 17.8406 42.9987C17.8406 44.5058 16.6507 45.7412 15.0128 45.7412C13.3749 45.7412 12.2009 44.5209 12.2009 42.9987ZM16.6204 42.9987C16.6204 42.0893 15.953 41.3326 15.0137 41.3326C14.0734 41.3326 13.422 42.075 13.422 42.9987C13.422 43.9081 14.0894 44.6657 15.0288 44.6657C15.969 44.6648 16.6204 43.9232 16.6204 42.9987Z" fill="#FFFFFF" />
                    <path d="M20.3939 40.3468H21.6523L23.0467 42.5892L24.442 40.3468H25.7004V45.6497H24.5406V42.1878L23.0476 44.4525H23.0174L21.5395 42.21V45.6497H20.3948V40.3468H20.3939Z" fill="#FFFFFF" />
                    <path d="M28.4055 43.377V40.3468H29.5724V43.3468C29.5724 44.21 30.0043 44.6576 30.717 44.6576C31.4298 44.6576 31.8617 44.226 31.8617 43.385V40.3468H33.0294V43.3397C33.0294 44.9454 32.1274 45.7331 30.7019 45.7331C29.2764 45.7331 28.4055 44.9374 28.4055 43.377Z" fill="#FFFFFF" />
                    <path d="M35.7338 40.3468H36.81L39.2966 43.6115V40.3468H40.4484V45.6497H39.4557L36.8856 42.2784V45.6497H35.7329V40.3468H35.7338Z" fill="#FFFFFF" />
                    <path d="M43.2904 40.3468H44.4573V45.6497H43.2904V40.3468Z" fill="#FFFFFF" />
                    <path d="M47.2993 40.3468H49.3682C51.0363 40.3468 52.1881 41.4907 52.1881 42.9978C52.1881 44.4898 51.0354 45.6497 49.3682 45.6497H47.2993V40.3468ZM49.3691 44.5973C50.3245 44.5973 50.9688 43.9534 50.9688 42.9987C50.9688 42.059 50.3245 41.4001 49.3691 41.4001H48.4671V44.5964H49.3691V44.5973Z" fill="#FFFFFF" />
                    <path d="M56.1828 40.3095H57.259L59.5332 45.6497H58.313L57.8278 44.4605H55.5838L55.0985 45.6497H53.9086L56.1828 40.3095ZM57.4101 43.4303L56.7053 41.7109L56.0006 43.4303H57.4101Z" fill="#FFFFFF" />
                    <path d="M61.8669 40.3468H63.9358C65.6039 40.3468 66.7557 41.4907 66.7557 42.9978C66.7557 44.4898 65.603 45.6497 63.9358 45.6497H61.8669V40.3468ZM63.9358 44.5973C64.8912 44.5973 65.5355 43.9534 65.5355 42.9987C65.5355 42.059 64.8912 41.4001 63.9358 41.4001H63.0338V44.5964H63.9358V44.5973Z" fill="#FFFFFF" />
                </g>
                <defs>
                    <clipPath id="clip0_2131_3283">
                        <rect width="72" height="45.7412" fill="white" />
                    </clipPath>
                </defs>
            </svg>

            {/* <picture>
                <source srcSet={"logo.png"} media="(max-width: 500px)" />
                <source srcSet={"logo.png"} media="(max-width: 960px)" />
                <img src={"logo.png"} alt="holacomunidad" />
            </picture> */}
        </a>
    </Link>
);


const validNavbarLink = menuLink => {
    const { label, link } = menuLink;
    if (
        link.link_type === "Document" &&
        link.uid !== "" &&
        label[0].text !== ""
    ) {
        return true;
    } else if (
        (link.link_type === "Web" || link.type === "Media") &&
        link.url !== "" &&
        label[0].text !== ""
    ) {
        return true;
    } else {
        return false;
    }
};

export const renderedMenuLinks = (menuLinks, pageName) => Array.isArray(menuLinks)
    ? menuLinks.map((menuLink, index) => {
        const { label, link } = menuLink;
        if (validNavbarLink(menuLink)) {
            return (
                <>
                    <LinkPage
                        pageName={pageName}
                        key={index + "_menu_links"}
                        uid={link?.uid || ""}
                        lang={link?.lang || ""}
                        type={link?.type || ""}
                        text={label || "-"}
                        id={link?.id || "#"}
                        slug={link?.slug || "#"}
                        url={link?.url || ""}
                    />
                </>
            );
        }
    })
    : "";